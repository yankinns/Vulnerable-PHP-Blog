<?php
session_start();


error_reporting(E_ALL);
ini_set('display_errors', 1);


define('DB_HOST', 'localhost');
define('DB_NAME', 'vulnerable_blog');
define('DB_USER', 'root');
define('DB_PASS', ''); // Пустой пароль!

// Подключение к БД
$conn = mysqli_connect(DB_HOST, DB_USER, DB_PASS, DB_NAME);
if (!$conn) {
    die("Ошибка подключения: " . mysqli_connect_error());
}


function old_escape($input) {
    // Устаревший и небезопасный способ!
    global $conn;
    return mysqli_real_escape_string($conn, $input);
}

// Простая функция для "проверки" аутентификации
function is_admin() {
    return isset($_SESSION['admin']) && $_SESSION['admin'] === true;
}
?>
